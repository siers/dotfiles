#!/usr/bin/env zsh

# ENV
export MANPAGER=vimpager
export PAGER=vimpager
export EDITOR=vim
export ZSH=$HOME/.oh-my-zsh
alias less=$PAGER

# PATH
if [ -z "$(echo $PATH | grep ~/bin)" ]
then
    [ -e ~/bin ] &&
        export PATH="$(find ~/bin -type d | tr '\n' :)$PATH"

    if [ -e ~/.rbenv/bin ]; then
        # git clone https://github.com/rbenv/rbenv.git ~/.rbenv
        # git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build
        export PATH="$HOME/.rbenv/bin:$PATH"
        eval "$(rbenv init -)"
    fi

    if [ -e ~/code/go/pkgs/bin ]; then
        export PATH="$PATH:$HOME/code/go/pkgs/bin"
        export GOPATH="$HOME/code/go/pkgs"
    fi

    if [ -e ~/down/perl5 ]; then
        # generated by cpan
        export PATH="$HOME/down/perl5/bin${PATH:+:${PATH}}"
        export PERL5LIB="$HOME/down/perl5/lib/perl5${PERL5LIB:+:${PERL5LIB}}"
        export PERL_LOCAL_LIB_ROOT="$HOME/down/perl5${PERL_LOCAL_LIB_ROOT:+:${PERL_LOCAL_LIB_ROOT}}"
        export PERL_MB_OPT="--install_base \"/$HOME/down/perl5\""
        export PERL_MM_OPT="INSTALL_BASE=$HOME/down/perl5"
    fi
fi

# find ~/bin \! -perm -a+x -print | grep -v environments | xargs chmod +x
