#!/usr/bin/env ruby

require 'date'

def f(n)
  value = (6 + n.wday + n.to_date.cweek).modulo(7)
  "#{ "%2s" % n.day }:\e[31m#{ value }\e[0m"
end

day = 3600*24
month = 5.times.map { |delta_week|
  7.times.map { |delta_day|
    Time.now + day*delta_day + day*7*(delta_week-2)
  }
}

month.each_with_index do |week, index|
  prefix = if index == 2; 'week from today' else ' ' * 15; end
  puts (([prefix] + week.map(&method(:f))).join(' | '))
end
